<table class="cell">
  <tr>
    <td>
      Coin Symbol :
    </td>
    <td>
      <input
        size="3"
        type="text"
        [(ngModel)]="RequestedCoin"
        matInput
        [formControl]="myControl"
        [matAutocomplete]="auto"
      />
      <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete">
        <mat-option
          *ngFor="let option of filteredOptions | async"
          [value]="option"
        >
          {{ option }}
        </mat-option>
      </mat-autocomplete>
      <button class="btn btn-danger" (click)="addCoin()">+</button>
    </td>

    <td>Refresh Interval (in seconds)</td>
    <td colspan="3" align="left">
      <button
        class="btn btn-danger rounded-circle"
        width="20px"
        (click)="changeInterval('+')"
      >
        +5
      </button>
      <input
        size="1"
        type="text"
        [(ngModel)]="refreshInterval"
        (change)="restart()"
      />
      <button
        class="btn btn-danger rounded-circle"
        width="20px"
        (click)="changeInterval('-')"
      >
        -5
      </button>
    </td>

   

    <td>Updated on : {{ lastUpdated }}</td>
    <td>
      Timer :
      <countdown-timer [start]="timer"></countdown-timer>
    </td>
  </tr>
</table>

<mat-progress-bar mode="determinate" value="{{progressValue}}"></mat-progress-bar>

<div class="accordion" id="accordionExample">
  <div class="portcard">
    <div class="port-card-header" id="headingOne">
      <h5 class="mb-0">
        <button
          class="btn btn-link"
          type="button"
          data-toggle="collapse"
          data-target="#collapseOne"
          aria-expanded="true"
          aria-controls="collapseOne"
        >
          Manage Portfolio >>>
        </button>
        
     <span style="color: khaki;"> Total Portfolio : {{portfolioValue}} $</span> 
      </h5>
    </div>

    <div
      id="collapseOne"
      class="collapse show"
      aria-labelledby="headingOne"
      data-parent="#accordionExample"
    >
      <div class="card-body">
        <table *ngIf="portfolioData">
            <tr>
                <th class="portHeader">Coin</th>
                <th class="portHeader">Quantity</th>
                <th class="portHeader">Clear</th>
              </tr>
          <tr *ngFor="let data of portfolioData; let i = index">
            <td><input size="3" type="text" [(ngModel)]="data.coin" /></td>
            <td><input size="13" type="text" [(ngModel)]="data.quantity" /></td>
            <td><button size="13" (click)="removeFromPortfolio(data.coin,i)">X</button></td>
          </tr>
      
        
          <tr>
            <td>
              <button
                class="btn btn-danger"
                width="50px"
                (click)="addToPortfolio()"
              >
                Add more
              </button>
            </td>

            <td>
                <button
                  class="btn btn-danger"
                  width="50px"
                  (click)="updatePortfolio()"
                >
                 Update
                </button>
              </td>
          </tr>
        </table>
      </div>
    </div>
  </div>
</div>


<div class="card-data">
    <div class="card" *ngFor='let price of prices; let i = index'>

        <div class="container" style="margin: 0px 0px ">
            <div class="row">
                <div class="col2">
                    <h4 style="color: rgb(221, 243, 26);"><b>{{price.symbol}} </b></h4> 
                   
                </div>
                
                <div class="col" align="right">
                   
                    <a class="close" (click)='removeCoin(price.symbol)'>X</a>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <p style="color: rgb(62, 243, 26);">{{price.prices.binacePrice}} </p>  
            </div>
            <div class="col" align="right">
                   
               <span style="color: rgb(221, 243, 26); font-size: 10px;"> Change :</span> <label
                class="high"
                [ngClass]="{ low: price.prices.binacePriceDiff < 0 }"
                
                >{{ price.prices.binacePriceDiff }}</label
              >
             </div>
        </div>

        
    </div>
    

</div>





<!-- Alert Modal Window -->
<div class="container">
  <!-- Modal -->
  <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Set Alert for - {{ alertTrigger.coin }}</h4>
        </div>
        <div class="modal-body">
          <div class="row p-3 mb-2 bg-info text-white">
            <div class="col">
              <div class="checkbox">
                <label class="volume"
                  ><input
                    type="checkbox"
                    value="false"
                    [(ngModel)]="alertTrigger.isKonexChecked"
                  />Koinex</label
                >
              </div>
            </div>
            <div class="col">
              <div class="checkbox">
                <label class="volume"
                  ><input
                    type="checkbox"
                    value="true"
                    [(ngModel)]="alertTrigger.isBinanceChecked"
                  />Binance</label
                >
              </div>
            </div>
          </div>
          <table class="table table-borderless">
            <tr>
              <td>
                Higer
              </td>
              <td>
                <input type="text" [(ngModel)]="alertTrigger.highPriceKoinex" />
              </td>
              <td>&nbsp;</td>
              <td>
                Higer
              </td>
              <td>
                <input
                  type="text"
                  [(ngModel)]="alertTrigger.highPriceBinance"
                />
              </td>
            </tr>
            <tr>
              <td>
                Current
              </td>
              <td>
                <strong>{{ alertTrigger.currentPriceKoinex }}</strong>
              </td>
              <td>&nbsp;</td>
              <td>
                Current
              </td>
              <td>
                <strong>{{
                  alertTrigger.currentPriceBinance | formateNumber
                }}</strong>
              </td>
            </tr>
            <tr>
              <td>
                Lower
              </td>
              <td>
                <input type="text" [(ngModel)]="alertTrigger.lowPriceKoinex" />
              </td>
              <td>&nbsp;</td>
              <td>
                Lower
              </td>
              <td>
                <input type="text" [(ngModel)]="alertTrigger.lowPriceBinance" />
              </td>
            </tr>
            <tr>
              <td colspan="5">
                <button
                  type="button"
                  class="btn btn-danger"
                  (click)="setPriceAlert('on')"
                  data-dismiss="modal"
                >
                  Set Alert
                </button>
                <button
                  type="button"
                  class="btn btn-danger"
                  (click)="setPriceAlert('off')"
                  data-dismiss="modal"
                >
                  Stop Alert
                </button>
              </td>
            </tr>
          </table>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">
            Close
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
